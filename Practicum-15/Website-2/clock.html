<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Task Submission with Clock</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <button id="themeToggle" class="btn btn-outline-secondary position-fixed" style="top: 20px; right: 20px; z-index: 1000;">ğŸŒ™</button>
    <div class="container mt-5">
        <h2 class="mb-4">Task Submission</h2>

        <form id="taskForm" class="mb-3">
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="taskId" class="form-label">Task ID</label>
                    <input type="number" class="form-control" id="taskId" placeholder="Enter ID" />
                </div>
                <div class="col-md-6 mb-3">
                    <label for="taskName" class="form-label">Task Name</label>
                    <input type="text" class="form-control" id="taskName" placeholder="Enter task name" />
                </div>
                <div class="col-md-3 mb-3">
                    <label for="taskStatus" class="form-label">Status</label>
                    <select class="form-control" id="taskStatus">
                        <option value="Pending">Pending</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Completed">Completed</option>
                    </select>
                </div>
            </div>
            <div class="btn-group mb-3" role="group">
                <button type="button" class="btn btn-success" onclick="addTask()">Add Task</button>
                <button type="button" class="btn btn-primary" onclick="updateTask()">Update Task</button>
                <button type="button" class="btn btn-danger" onclick="deleteTask()">Delete Task</button>
                <button type="button" class="btn btn-info" onclick="showTasks()">Show All Tasks</button>
            </div>
        </form>

        <div id="message" class="alert alert-success d-none">
            Task operation completed successfully!
        </div>

        <h4>ğŸ“‹ Task List</h4>
        <div id="taskOutput" class="border p-3 mb-3 bg-light" style="min-height: 100px;">
            No tasks available. Add a task to get started.
        </div>

        <hr />

        <h4>ğŸ•’ Live Clock</h4>
        <div id="clockDisplay" class="fs-4 mb-2">--:--:--</div>
        <button class="btn btn-success me-2" onclick="startClock()">Start Clock</button>
        <button class="btn btn-danger" onclick="stopClock()">Stop Clock</button>

        <hr />

        <h4>â³ Countdown Timer</h4>
        <div id="countdownDisplay" class="fs-4 mb-2">Countdown: --</div>
        <button class="btn btn-warning me-2" onclick="startCountdown(10)">Start 10s Countdown</button>
        <button class="btn btn-info me-2" onclick="startCountdown(30)">Start 30s Countdown</button>
        <button class="btn btn-secondary me-2" onclick="startCountdown(60)">Start 60s Countdown</button>
        <button class="btn btn-outline-danger" onclick="resetCountdown()">Reset Countdown</button>
    </div>

    <script>
        // Task CRUD Operations
        let tasks = [];
        let taskIdCounter = 1;

        function addTask() {
            const id = document.getElementById('taskId').value || taskIdCounter++;
            const name = document.getElementById('taskName').value;
            const status = document.getElementById('taskStatus').value;
            const messageBox = document.getElementById('message');

            if (!name.trim()) {
                alert('Task name is required!');
                return;
            }

            tasks.push({ id: Number(id), name, status, created: new Date().toLocaleString() });
            messageBox.classList.remove('d-none');
            messageBox.textContent = 'Task added successfully!';
            clearForm();
          //  showTasks();
            hideMessage();
        }

        function updateTask() {
            const id = Number(document.getElementById('taskId').value);
            const name = document.getElementById('taskName').value;
            const status = document.getElementById('taskStatus').value;
            const messageBox = document.getElementById('message');

            if (!id) {
                alert('Task ID is required for update!');
                return;
            }

            let task = tasks.find(t => t.id === id);
            if (!task) {
                alert('Task not found!');
                return;
            }

            task.name = name || task.name;
            task.status = status || task.status;
            task.updated = new Date().toLocaleString();

            messageBox.classList.remove('d-none');
            messageBox.textContent = 'Task updated successfully!';
            clearForm();
            //showTasks();
            hideMessage();
        }

        function deleteTask() {
            const id = Number(document.getElementById('taskId').value);
            const messageBox = document.getElementById('message');

            if (!id) {
                alert('Task ID is required for deletion!');
                return;
            }

            tasks = tasks.filter(t => t.id !== id);
            messageBox.classList.remove('d-none');
            messageBox.textContent = 'Task deleted successfully!';
            clearForm();
         //   showTasks();
            hideMessage();
        }

        function showTasks() {
            const output = document.getElementById('taskOutput');

            if (tasks.length === 0) {
                output.innerHTML = 'No tasks available. Add a task to get started.';
                return;
            }

            output.innerHTML = tasks
                .map(t => `
                    <div class="border-bottom pb-2 mb-2">
                        <strong>ID:</strong> ${t.id} | 
                        <strong>Name:</strong> ${t.name} | 
                        <strong>Status:</strong> <span class="badge bg-${getStatusColor(t.status)}">${t.status}</span><br>
                        <small class="text-muted">Created: ${t.created}${t.updated ? ' | Updated: ' + t.updated : ''}</small>
                    </div>
                `)
                .join('');
        }

        function getStatusColor(status) {
            switch(status) {
                case 'Pending': return 'warning';
                case 'In Progress': return 'primary';
                case 'Completed': return 'success';
                default: return 'secondary';
            }
        }

        function clearForm() {
            document.getElementById('taskId').value = '';
            document.getElementById('taskName').value = '';
            document.getElementById('taskStatus').value = 'Pending';
        }

        function hideMessage() {
            setTimeout(() => {
                document.getElementById('message').classList.add('d-none');
            }, 3000);
        }

        // â±ï¸ Clock Logic
        let clockInterval = null;

        function startClock() {
            if (clockInterval) return; // Prevent multiple intervals

            clockInterval = setInterval(() => {
                const now = new Date();
                const timeString = now.toLocaleTimeString();
                document.getElementById('clockDisplay').textContent = timeString;
            }, 1000);
        }

        function stopClock() {
            clearInterval(clockInterval);
            clockInterval = null;
            document.getElementById('clockDisplay').textContent = "--:--:--";
        }

        // â³ Countdown Logic
        let countdownInterval = null;

        function startCountdown(seconds) {
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }

            let remaining = seconds;
            const display = document.getElementById('countdownDisplay');
            display.textContent = `Countdown: ${remaining}s`;

            countdownInterval = setInterval(() => {
                remaining--;
                display.textContent = `Countdown: ${remaining}s`;

                if (remaining <= 0) {
                    clearInterval(countdownInterval);
                    countdownInterval = null;
                    display.textContent = "Countdown complete!";
                }
            }, 1000);
        }

        function resetCountdown() {
            if (countdownInterval) {
                clearInterval(countdownInterval);
                countdownInterval = null;
            }
            document.getElementById('countdownDisplay').textContent = 'Countdown: --';
        }
        
        // Dark Mode Toggle
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        
        themeToggle.addEventListener('click', function() {
            body.classList.toggle('dark-mode');
            this.textContent = body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ğŸŒ™';
        });
    </script>
</body>
</html>